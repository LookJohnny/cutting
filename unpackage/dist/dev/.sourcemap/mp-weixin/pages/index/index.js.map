{"version":3,"sources":["webpack:////Users/johnnyliu/Documents/HBuilderProjects/石头人建材剪裁解决方案/pages/index/index.vue?36d8","webpack:////Users/johnnyliu/Documents/HBuilderProjects/石头人建材剪裁解决方案/pages/index/index.vue?03d4","webpack:////Users/johnnyliu/Documents/HBuilderProjects/石头人建材剪裁解决方案/pages/index/index.vue?b78f","webpack:////Users/johnnyliu/Documents/HBuilderProjects/石头人建材剪裁解决方案/pages/index/index.vue?e2ea","uni-app:///pages/index/index.vue","webpack:////Users/johnnyliu/Documents/HBuilderProjects/石头人建材剪裁解决方案/pages/index/index.vue?04ac","webpack:////Users/johnnyliu/Documents/HBuilderProjects/石头人建材剪裁解决方案/pages/index/index.vue?d91c","uni-app:///main.js"],"names":["data","boardLength","boardWidth","cutRequests","width","count","results","histories","colors","computed","wasteRate","onLoad","methods","validateBoardSize","uni","title","icon","formatNumber","resetBoardSize","addRequest","deleteRequest","getRandomColor","validate","totalPieces","req","calculate","board","piece","date","requests","totalBoards","calculateCutPlan","pieces","boards","placed","remain","loadHistory","wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AAAm0B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCsGv1B;EACAA;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACA;MACA;QACA;UAAA;QAAA;MACA;MACA;IACA;EACA;EACAC;IACA;IACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MAEA;QACAC;UACAC;UACAC;QACA;QACA;QACA;MACA;;MAEA;MACA;MACA;QACAF;UACAC;UACAC;QACA;QACA;QACA;MACA;;MAEA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;QACAf;QACAC;MACA;IACA;IACAe;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MAEA;MACA;MAAA,2CAEA;QAAA;MAAA;QAAA;UAAA;UACA;YACAR;cACAC;cACAC;YACA;YACA;UACA;UACA;UACA;UAEA;YACAF;cACAC;cACAC;YACA;YACA;UACA;UACA;YACAF;cACAC;cACAC;YACA;YACA;UACA;;UAEA;UACA;YACAF;cACAC;cACAC;YACA;YACA;UACA;UAEAO;UACA;UACA;YACAT;cACAC;cACAC;YACA;YACA;UACA;;UAEA;UACAQ;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MACA;IACA;IACAC;MAAA;MACA;;MAEA;MACA;QAAA;UACArB;UACAC;QACA;MAAA;;MAEA;MACA;;MAEA;MACAC;QACAoB;QACAA;UACAC;QACA;MACA;MAEA;;MAEA;MACA;QACAC;QACA3B;QACAC;QACA2B;UAAA;YACAzB;YACAC;UACA;QAAA;QACAC;QACAwB;QACAP;UAAA;QAAA;MACA;MAEA;MACA;MACAT;IACA;IACAiB;MACA;MACA;MACAF;QACA;UACAG;QACA;MACA;MACA;MACAA;QAAA;MAAA;MAEA;MACA;MAEA;QAAA;QACA;QACA;QAAA,4CACAC;UAAA;QAAA;UAAA;YAAA;YACA;YACA;YACA;cACAP;gBAAAtB;cAAA;cACAsB;cACAQ;cACA;YACA;UACA;QAAA;UAAA;QAAA;UAAA;QAAA;QACA;UACAD;YACAD;cAAA5B;YAAA;YACA+B;UACA;QACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC1UA;AAAA;AAAA;AAAA;AAAgrC,CAAgB,gmCAAG,EAAC,C;;;;;;;;;;;ACApsC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAGA;AACA;AAHA;AACAC,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C","file":"pages/index/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.cutRequests.length\n  var g1 = _vm.results.length\n  var g2 = g1 ? _vm.results.length : null\n  var l1 = g1\n    ? _vm.__map(_vm.results, function (board, boardIndex) {\n        var $orig = _vm.__get_orig(board)\n        var l0 = _vm.__map(board.pieces, function (piece, pieceIndex) {\n          var $orig = _vm.__get_orig(piece)\n          var m0 = _vm.getRandomColor(piece.width)\n          return {\n            $orig: $orig,\n            m0: m0,\n          }\n        })\n        return {\n          $orig: $orig,\n          l0: l0,\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"container\">\n\t\t<!-- 输入区域 -->\n\t\t<view class=\"input-section\">\n\t\t\t<view class=\"board-info\">\n\t\t\t\t<text class=\"section-title\">板材规格</text>\n\t\t\t\t<view class=\"board-size-inputs\">\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<text>长：</text>\n\t\t\t\t\t\t<input type=\"digit\" v-model=\"boardLength\" placeholder=\"长度(cm)\" @blur=\"validateBoardSize\" />\n\t\t\t\t\t\t<text>cm</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"multiply-symbol\">×</text>\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<text>宽：</text>\n\t\t\t\t\t\t<input type=\"digit\" v-model=\"boardWidth\" placeholder=\"宽度(cm)\" @blur=\"validateBoardSize\" />\n\t\t\t\t\t\t<text>cm</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<button class=\"reset-btn\" @click=\"resetBoardSize\">重置默认</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"cut-list\">\n\t\t\t\t<text class=\"section-title\">裁切需求</text>\n\t\t\t\t<view class=\"cut-item\" v-for=\"(item, index) in cutRequests\" :key=\"index\">\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<input type=\"digit\" v-model=\"item.width\" placeholder=\"宽度(cm)\" />\n\t\t\t\t\t\t<input type=\"number\" v-model=\"item.count\" placeholder=\"数量\" />\n\t\t\t\t\t\t<button class=\"delete-btn\" @click=\"deleteRequest(index)\" v-if=\"cutRequests.length > 1\">×</button>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<button class=\"add-btn\" @click=\"addRequest\">添加需求</button>\n\t\t\t</view>\n\t\t\t\n\t\t\t<button class=\"calculate-btn\" @click=\"calculate\">计算方案</button>\n\t\t</view>\n\n\t\t<!-- 结果展示区域 -->\n\t\t<view class=\"result-section\" v-if=\"results.length\">\n\t\t\t<text class=\"section-title\">裁切方案</text>\n\t\t\t<view class=\"total-info\">\n\t\t\t\t<text>共需要 {{results.length}} 块板材</text>\n\t\t\t\t<text>总废料率: {{wasteRate}}%</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 图形化展示 -->\n\t\t\t<scroll-view scroll-y class=\"boards-view\">\n\t\t\t\t<view class=\"board-item\" v-for=\"(board, boardIndex) in results\" :key=\"boardIndex\">\n\t\t\t\t\t<view class=\"board-header\">\n\t\t\t\t\t\t<text class=\"board-title\">板材 {{boardIndex + 1}}</text>\n\t\t\t\t\t\t<text class=\"board-remain\">剩余: {{board.remain}}cm</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"board-visual-container\">\n\t\t\t\t\t\t<!-- 标尺 -->\n\t\t\t\t\t\t<view class=\"ruler\">\n\t\t\t\t\t\t\t<text v-for=\"i in 12\" :key=\"i\" class=\"ruler-mark\">{{i * 10}}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<!-- 板材可视化 -->\n\t\t\t\t\t\t<view class=\"board-visual\">\n\t\t\t\t\t\t\t<view \n\t\t\t\t\t\t\t\tv-for=\"(piece, pieceIndex) in board.pieces\" \n\t\t\t\t\t\t\t\t:key=\"pieceIndex\"\n\t\t\t\t\t\t\t\tclass=\"piece\"\n\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\twidth: (piece.width / boardWidth * 100) + '%',\n\t\t\t\t\t\t\t\t\tbackgroundColor: getRandomColor(piece.width)\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<text class=\"piece-width\">{{piece.width}}cm</text>\n\t\t\t\t\t\t\t\t<view class=\"piece-grid\"></view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view \n\t\t\t\t\t\t\t\tv-if=\"board.remain > 0\"\n\t\t\t\t\t\t\t\tclass=\"piece remain\"\n\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\twidth: (board.remain / boardWidth * 100) + '%'\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<text class=\"piece-width\">{{board.remain}}cm</text>\n\t\t\t\t\t\t\t\t<view class=\"piece-grid\"></view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</view>\n\n\t\t<!-- 历史记录 -->\n\t\t<view class=\"history-section\">\n\t\t\t<text class=\"section-title\">历史记录</text>\n\t\t\t<scroll-view scroll-y class=\"history-list\">\n\t\t\t\t<view class=\"history-item\" v-for=\"(history, index) in histories\" :key=\"index\" @click=\"loadHistory(index)\">\n\t\t\t\t\t<text class=\"history-date\">{{history.date}}</text>\n\t\t\t\t\t<text class=\"history-board-size\">{{history.boardLength}}×{{history.boardWidth}}cm</text>\n\t\t\t\t\t<text class=\"history-summary\">{{history.totalBoards}}块板材 · {{history.totalPieces}}个裁片</text>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tboardLength: '244',\n\t\t\t\tboardWidth: '122',\n\t\t\t\tcutRequests: [{\n\t\t\t\t\twidth: '',\n\t\t\t\t\tcount: ''\n\t\t\t\t}],\n\t\t\t\tresults: [],\n\t\t\t\thistories: [],\n\t\t\t\tcolors: ['#2979ff', '#19be6b', '#ff9900', '#9c26b0', '#e51c23'],\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\twasteRate() {\n\t\t\t\tif (!this.results.length) return 0;\n\t\t\t\tconst totalArea = this.results.length * parseFloat(this.boardLength) * parseFloat(this.boardWidth);\n\t\t\t\tconst usedArea = this.results.reduce((sum, board) => {\n\t\t\t\t\treturn sum + board.pieces.reduce((s, p) => s + p.width * parseFloat(this.boardLength), 0);\n\t\t\t\t}, 0);\n\t\t\t\treturn ((totalArea - usedArea) / totalArea * 100).toFixed(2);\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\t// 加载历史记录\n\t\t\tconst histories = uni.getStorageSync('cut-histories') || [];\n\t\t\tthis.histories = histories;\n\t\t},\n\t\tmethods: {\n\t\t\tvalidateBoardSize() {\n\t\t\t\tconst length = parseFloat(this.boardLength);\n\t\t\t\tconst width = parseFloat(this.boardWidth);\n\t\t\t\t\n\t\t\t\tif (!length || !width || length <= 0 || width <= 0) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '板材尺寸必须大于0',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\tthis.resetBoardSize();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// 添加最大值限制\n\t\t\t\tconst MAX_SIZE = 10000; // 100米，合理的板材最大尺寸\n\t\t\t\tif (length > MAX_SIZE || width > MAX_SIZE) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '板材尺寸不能超过100米',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\tthis.resetBoardSize();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 四舍五入到2位小数\n\t\t\t\tthis.boardLength = this.formatNumber(length);\n\t\t\t\tthis.boardWidth = this.formatNumber(width);\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\t// 格式化数字，处理精度问题\n\t\t\tformatNumber(num) {\n\t\t\t\t// 处理科学计数法并保留10位，确保精度\n\t\t\t\tlet str = Number(num).toFixed(10);\n\t\t\t\t// 转换为数字以去除末尾多余的0\n\t\t\t\tlet value = parseFloat(str);\n\t\t\t\t// 如果是整数，直接返回\n\t\t\t\tif (Number.isInteger(value)) {\n\t\t\t\t\treturn value.toString();\n\t\t\t\t}\n\t\t\t\t// 如果是小数，保留两位\n\t\t\t\treturn value.toFixed(2);\n\t\t\t},\n\t\t\tresetBoardSize() {\n\t\t\t\tthis.boardLength = '244';\n\t\t\t\tthis.boardWidth = '122';\n\t\t\t},\n\t\t\taddRequest() {\n\t\t\t\tthis.cutRequests.push({\n\t\t\t\t\twidth: '',\n\t\t\t\t\tcount: ''\n\t\t\t\t});\n\t\t\t},\n\t\t\tdeleteRequest(index) {\n\t\t\t\tthis.cutRequests.splice(index, 1);\n\t\t\t},\n\t\t\tgetRandomColor(width) {\n\t\t\t\treturn this.colors[width % this.colors.length];\n\t\t\t},\n\t\t\tvalidate() {\n\t\t\t\tif (!this.validateBoardSize()) return false;\n\t\t\t\t\n\t\t\t\tconst MAX_PIECES = 1000; // 单次最大裁切数量\n\t\t\t\tlet totalPieces = 0;\n\t\t\t\t\n\t\t\t\tfor (let req of this.cutRequests) {\n\t\t\t\t\tif (!req.width || !req.count) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '请填写完整的宽度和数量',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tconst width = parseFloat(req.width);\n\t\t\t\t\tconst count = parseInt(req.count);\n\t\t\t\t\t\n\t\t\t\t\tif (width > parseFloat(this.boardWidth)) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '裁切宽度不能超过板材宽度',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (width <= 0 || count <= 0) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '宽度和数量必须大于0',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 检查单个需求的数量上限\n\t\t\t\t\tif (count > MAX_PIECES) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '单个尺寸数量不能超过1000',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttotalPieces += count;\n\t\t\t\t\t// 检查总数量上限\n\t\t\t\t\tif (totalPieces > MAX_PIECES) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '总裁切数量不能超过1000',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 格式化宽度为2位小数\n\t\t\t\t\treq.width = this.formatNumber(width);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tcalculate() {\n\t\t\t\tif (!this.validate()) return;\n\t\t\t\t\n\t\t\t\t// 转换输入数据\n\t\t\t\tconst requests = this.cutRequests.map(req => ({\n\t\t\t\t\twidth: parseFloat(req.width),\n\t\t\t\t\tcount: parseInt(req.count)\n\t\t\t\t}));\n\t\t\t\t\n\t\t\t\t// 计算裁切方案\n\t\t\t\tconst results = this.calculateCutPlan(requests);\n\t\t\t\t\n\t\t\t\t// 格式化结果中的数字\n\t\t\t\tresults.forEach(board => {\n\t\t\t\t\tboard.remain = this.formatNumber(board.remain);\n\t\t\t\t\tboard.pieces.forEach(piece => {\n\t\t\t\t\t\tpiece.width = this.formatNumber(piece.width);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.results = results;\n\t\t\t\t\n\t\t\t\t// 保存到历史记录\n\t\t\t\tconst history = {\n\t\t\t\t\tdate: new Date().toLocaleString(),\n\t\t\t\t\tboardLength: this.boardLength,\n\t\t\t\t\tboardWidth: this.boardWidth,\n\t\t\t\t\trequests: this.cutRequests.map(req => ({\n\t\t\t\t\t\twidth: this.formatNumber(req.width),\n\t\t\t\t\t\tcount: req.count\n\t\t\t\t\t})),\n\t\t\t\t\tresults: results,\n\t\t\t\t\ttotalBoards: results.length,\n\t\t\t\t\ttotalPieces: requests.reduce((sum, req) => sum + req.count, 0)\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tthis.histories.unshift(history);\n\t\t\t\tif (this.histories.length > 20) this.histories.pop(); // 最多保存20条记录\n\t\t\t\tuni.setStorageSync('cut-histories', this.histories);\n\t\t\t},\n\t\t\tcalculateCutPlan(requests) {\n\t\t\t\t// 将所有需求拆成单个裁片\n\t\t\t\tlet pieces = [];\n\t\t\t\trequests.forEach(req => {\n\t\t\t\t\tfor (let i = 0; i < req.count; i++) {\n\t\t\t\t\t\tpieces.push(parseFloat(req.width));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// 按宽度从大到小排序（通常更优）\n\t\t\t\tpieces.sort((a, b) => b - a);\n\n\t\t\t\tlet boards = [];\n\t\t\t\tconst boardWidth = parseFloat(this.boardWidth);\n\t\t\t\t\n\t\t\t\tfor (let width of pieces) {\n\t\t\t\t\tlet placed = false;\n\t\t\t\t\t// 使用精确计算处理小数\n\t\t\t\t\tfor (let board of boards) {\n\t\t\t\t\t\tconst remainWidth = parseFloat(board.remain);\n\t\t\t\t\t\t// 添加一个小的容差值(0.01)来处理浮点数计算误差\n\t\t\t\t\t\tif (remainWidth >= width - 0.01) {\n\t\t\t\t\t\t\tboard.pieces.push({ width: this.formatNumber(width) });\n\t\t\t\t\t\t\tboard.remain = this.formatNumber(remainWidth - width);\n\t\t\t\t\t\t\tplaced = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!placed) {\n\t\t\t\t\t\tboards.push({\n\t\t\t\t\t\t\tpieces: [{ width: this.formatNumber(width) }],\n\t\t\t\t\t\t\tremain: this.formatNumber(boardWidth - width)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn boards;\n\t\t\t},\n\t\t\tloadHistory(index) {\n\t\t\t\tconst history = this.histories[index];\n\t\t\t\tthis.boardLength = history.boardLength;\n\t\t\t\tthis.boardWidth = history.boardWidth;\n\t\t\t\tthis.cutRequests = JSON.parse(JSON.stringify(history.requests));\n\t\t\t\tthis.results = history.results;\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n.container {\n\tpadding: 20rpx;\n}\n\n.section-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tmargin: 20rpx 0;\n\tcolor: #333;\n}\n\n.board-info {\n\tbackground-color: #f8f8f8;\n\tpadding: 20rpx;\n\tborder-radius: 10rpx;\n\tmargin-bottom: 20rpx;\n}\n\n.board-size-inputs {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 20rpx;\n\tmargin-top: 10rpx;\n}\n\n.multiply-symbol {\n\tfont-size: 32rpx;\n\tcolor: #666;\n}\n\n.board-size-inputs .input-group {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 10rpx;\n}\n\n.board-size-inputs input {\n\twidth: 120rpx;\n\theight: 70rpx;\n\tborder: 1rpx solid #ddd;\n\tborder-radius: 6rpx;\n\tpadding: 0 20rpx;\n}\n\n.reset-btn {\n\tfont-size: 24rpx;\n\tpadding: 0 20rpx;\n\theight: 60rpx;\n\tline-height: 60rpx;\n\tbackground-color: #f0f0f0;\n\tcolor: #666;\n}\n\n.cut-list {\n\tbackground-color: #fff;\n\tpadding: 20rpx;\n\tborder-radius: 10rpx;\n\tmargin-bottom: 20rpx;\n}\n\n.cut-item {\n\tmargin-bottom: 20rpx;\n}\n\n.input-group {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 20rpx;\n}\n\n.input-group input {\n\tflex: 1;\n\theight: 70rpx;\n\tborder: 1rpx solid #ddd;\n\tborder-radius: 6rpx;\n\tpadding: 0 20rpx;\n}\n\n.delete-btn {\n\twidth: 70rpx;\n\theight: 70rpx;\n\tline-height: 70rpx;\n\ttext-align: center;\n\tbackground-color: #f56c6c;\n\tcolor: #fff;\n\tborder-radius: 6rpx;\n\tpadding: 0;\n}\n\n.add-btn {\n\tbackground-color: #2979ff;\n\tcolor: #fff;\n\tmargin: 20rpx 0;\n}\n\n.calculate-btn {\n\tbackground-color: #19be6b;\n\tcolor: #fff;\n\tmargin: 20rpx 0;\n}\n\n.result-section {\n\tbackground-color: #fff;\n\tpadding: 20rpx;\n\tborder-radius: 10rpx;\n\tmargin-bottom: 20rpx;\n}\n\n.total-info {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tcolor: #666;\n\tfont-size: 28rpx;\n\tmargin-bottom: 20rpx;\n}\n\n.boards-view {\n\theight: 600rpx;\n\tbackground: #fff;\n\tpadding: 20rpx;\n\tborder-radius: 10rpx;\n}\n\n.board-item {\n\tbackground-color: #f8f8f8;\n\tpadding: 20rpx;\n\tborder-radius: 10rpx;\n\tmargin-bottom: 30rpx;\n\tbox-shadow: 0 2rpx 6rpx rgba(0,0,0,0.1);\n}\n\n.board-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tmargin-bottom: 20rpx;\n\talign-items: center;\n}\n\n.board-title {\n\tfont-size: 32rpx;\n\tcolor: #333;\n\tfont-weight: bold;\n}\n\n.board-remain {\n\tfont-size: 28rpx;\n\tcolor: #666;\n\tbackground: #f0f0f0;\n\tpadding: 4rpx 16rpx;\n\tborder-radius: 20rpx;\n}\n\n.board-visual-container {\n\tposition: relative;\n\tmargin-top: 30rpx;\n}\n\n.ruler {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tpadding: 0 20rpx;\n\tmargin-bottom: 10rpx;\n}\n\n.ruler-mark {\n\tfont-size: 20rpx;\n\tcolor: #999;\n\ttransform: translateX(-50%);\n}\n\n.board-visual {\n\theight: 100rpx;\n\tdisplay: flex;\n\tbackground-color: #fff;\n\tborder: 2rpx solid #ddd;\n\tborder-radius: 6rpx;\n\toverflow: hidden;\n\tposition: relative;\n}\n\n.piece {\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tborder-right: 2rpx solid rgba(255,255,255,0.3);\n}\n\n.piece-width {\n\tcolor: #fff;\n\tfont-size: 26rpx;\n\tfont-weight: bold;\n\ttext-shadow: 0 1rpx 2rpx rgba(0,0,0,0.2);\n\tz-index: 1;\n}\n\n.piece-grid {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground-image: linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px),\n\t\t\t\t\t  linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px);\n\tbackground-size: 20rpx 20rpx;\n}\n\n.piece.remain {\n\tbackground-color: #f5f5f5;\n}\n\n.piece.remain .piece-width {\n\tcolor: #999;\n\ttext-shadow: none;\n}\n\n.piece.remain .piece-grid {\n\tbackground-image: linear-gradient(90deg, rgba(0,0,0,0.05) 1px, transparent 1px),\n\t\t\t\t\t  linear-gradient(rgba(0,0,0,0.05) 1px, transparent 1px);\n}\n\n.history-section {\n\tbackground-color: #fff;\n\tpadding: 20rpx;\n\tborder-radius: 10rpx;\n}\n\n.history-list {\n\theight: 300rpx;\n}\n\n.history-item {\n\tpadding: 20rpx;\n\tborder-bottom: 1rpx solid #eee;\n}\n\n.history-date {\n\tfont-size: 24rpx;\n\tcolor: #999;\n}\n\n.history-board-size {\n\tfont-size: 24rpx;\n\tcolor: #666;\n\tmargin-left: 20rpx;\n}\n\n.history-summary {\n\tfont-size: 28rpx;\n\tcolor: #333;\n\tmargin-top: 10rpx;\n}\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1750701322805\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)"],"sourceRoot":""}